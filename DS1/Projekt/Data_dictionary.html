<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>IDK proč to dělám v HTML XD</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@100;300;400;500;600;900&family=Poppins:wght@100;300;400;500;700&family=Roboto:wght@100;300;500;700&display=swap"
            rel="stylesheet"
        />
        <style>
            html {
                font-family: 'Inter', sans-serif;
                font-weight: 400;
            }

            table {
                border-collapse: collapse;
            }

            thead {
                font-weight: 600;
            }

            thead,
            tbody {
                border: black 2px solid;
            }

            td,
            th {
                padding: 6px;
            }

            td:first-child,
            td:nth-child(6),
            th:first-child,
            th:nth-child(6) {
                border-right: black 2px solid;
            }

            td:nth-child(2),
            td:nth-child(3),
            td:nth-child(4),
            td:nth-child(5),
            td:nth-child(6) {
                text-align: center;
            }
        </style>
    </head>
    <body>
        <!--
CREATE TABLE users (
    id       INTEGER NOT NULL,
    username VARCHAR2(255) NOT NULL,
    email    VARCHAR2(255),
    password VARCHAR2(72) NOT NULL,
    role     INTEGER NOT NULL
);

ALTER TABLE users ADD CONSTRAINT users_pk PRIMARY KEY ( id );
        -->
        <p>Tabulka <b>Users</b></p>
        <table>
            <thead>
                <tr>
                    <th>Název atributu</th>
                    <th>Dat. typ</th>
                    <th>Délka</th>
                    <th>Klíč</th>
                    <th>Null</th>
                    <th>IO</th>
                    <th>Popis</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>user_id</td>
                    <td>INTEGER</td>
                    <td></td>
                    <td>Primární</td>
                    <td>Ne</td>
                    <td></td>
                    <td>Automatický inkrementovaný PK</td>
                </tr>
                <tr>
                    <td>username</td>
                    <td>VARCHAR</td>
                    <td>255</td>
                    <td></td>
                    <td>Ne</td>
                    <td></td>
                    <td>Uživatelské jméno, pro přihlášení uživatele</td>
                </tr>
                <tr>
                    <td>email</td>
                    <td>VARCHAR</td>
                    <td>255</td>
                    <td></td>
                    <td>Ano</td>
                    <td></td>
                    <td>Emailová adresa</td>
                </tr>
                <tr>
                    <td>password</td>
                    <td>VARCHAR</td>
                    <td>72</td>
                    <td></td>
                    <td>Ne</td>
                    <td></td>
                    <td>Heslo uživatele zašifrované algoritmem BCRYPT</td>
                </tr>
                <tr>
                    <td>role</td>
                    <td>VARCHAR</td>
                    <td>1</td>
                    <td></td>
                    <td>Ne</td>
                    <td>1</td>
                    <td>Role uživatele</td>
                </tr>
            </tbody>
        </table>

        <!--
CREATE TABLE tickets (
    id         INTEGER NOT NULL,
    name       VARCHAR2(255) NOT NULL,
    status     INTEGER NOT NULL,
    created_at DATE NOT NULL,
    users_id   INTEGER NOT NULL,
    types_id   INTEGER NOT NULL,
    users_id2  INTEGER NOT NULL
);

ALTER TABLE tickets ADD CONSTRAINT tickets_pk PRIMARY KEY ( id );

ALTER TABLE tickets
    ADD CONSTRAINT tickets_types_fk FOREIGN KEY ( types_id )
        REFERENCES types ( id );

ALTER TABLE tickets
    ADD CONSTRAINT tickets_users_fk FOREIGN KEY ( users_id )
        REFERENCES users ( id );

ALTER TABLE tickets
    ADD CONSTRAINT tickets_users_fkv2 FOREIGN KEY ( users_id2 )
        REFERENCES users ( id );
        -->
        <p>Tabulka <b>Tickets</b></p>
        <table>
            <thead>
                <tr>
                    <th>Název atributu</th>
                    <th>Dat. typ</th>
                    <th>Délka</th>
                    <th>Klíč</th>
                    <th>Null</th>
                    <th>IO</th>
                    <th>Popis</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ticket_id</td>
                    <td>INTEGER</td>
                    <td></td>
                    <td>Primární</td>
                    <td>Ne</td>
                    <td></td>
                    <td>Automatický inkrementovaný PK</td>
                </tr>
                <tr>
                    <td>name</td>
                    <td>VARCHAR</td>
                    <td>255</td>
                    <td></td>
                    <td>Ne</td>
                    <td></td>
                    <td>Název ticketu</td>
                </tr>
                <tr>
                    <td>status</td>
                    <td>INTEGER</td>
                    <td></td>
                    <td>Cizí (Statuses)</td>
                    <td>Ne</td>
                    <td></td>
                    <td>Stav ticketu</td>
                </tr>
                <tr>
                    <td>created_at</td>
                    <td>DATE</td>
                    <td></td>
                    <td></td>
                    <td>Ne</td>
                    <td></td>
                    <td>Datum vytvoření ticketu</td>
                </tr>
                <tr>
                    <td>Users_user_id</td>
                    <td>INTEGER</td>
                    <td></td>
                    <td>Cizí (Users)</td>
                    <td>Ne</td>
                    <td></td>
                    <td>Hráč, který vytvořil ticket</td>
                </tr>
                <tr>
                    <td>Types_type_id</td>
                    <td>INTEGER</td>
                    <td></td>
                    <td>Cizí (Types)</td>
                    <td>Ne</td>
                    <td></td>
                    <td>Typ ticketu</td>
                </tr>
                <tr>
                    <td>Users_user_id2</td>
                    <td>INTEGER</td>
                    <td></td>
                    <td>Cizí (Users)</td>
                    <td>Ne</td>
                    <td></td>
                    <td>Moderátor, který je přiřazen k ticketu</td>
                </tr>
            </tbody>
        </table>

        <!--
CREATE TABLE messages (
    id         INTEGER NOT NULL,
    message    VARCHAR2(1024) NOT NULL,
    created_at DATE NOT NULL,
    tickets_id INTEGER NOT NULL,
    users_id   INTEGER NOT NULL
);

ALTER TABLE messages ADD CONSTRAINT messages_pk PRIMARY KEY ( id );

ALTER TABLE messages
    ADD CONSTRAINT messages_tickets_fk FOREIGN KEY ( tickets_id )
        REFERENCES tickets ( id );

ALTER TABLE messages
    ADD CONSTRAINT messages_users_fk FOREIGN KEY ( users_id )
        REFERENCES users ( id );
        -->
        <p>Tabulka <b>Messages</b></p>
        <table>
            <thead>
                <tr>
                    <th>Název atributu</th>
                    <th>Dat. typ</th>
                    <th>Délka</th>
                    <th>Klíč</th>
                    <th>Null</th>
                    <th>IO</th>
                    <th>Popis</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>message_id</td>
                    <td>INTEGER</td>
                    <td></td>
                    <td>Primární</td>
                    <td>Ne</td>
                    <td></td>
                    <td>Automatický inkrementovaný PK</td>
                </tr>
                <tr>
                    <td>message</td>
                    <td>VARCHAR</td>
                    <td>1024</td>
                    <td></td>
                    <td>Ne</td>
                    <td></td>
                    <td>Zpráva</td>
                </tr>
                <tr>
                    <td>created_at</td>
                    <td>DATE</td>
                    <td></td>
                    <td></td>
                    <td>Ne</td>
                    <td></td>
                    <td>Datum vytvoření zprávy</td>
                </tr>
                <tr>
                    <td>Tickets_ticket_id</td>
                    <td>INTEGER</td>
                    <td></td>
                    <td>Cizí (Tickets)</td>
                    <td>Ne</td>
                    <td></td>
                    <td>Ticket, ke kterému je zpráva přiřazena</td>
                </tr>
                <tr>
                    <td>Users_user_id</td>
                    <td>INTEGER</td>
                    <td></td>
                    <td>Cizí (Users)</td>
                    <td>Ne</td>
                    <td></td>
                    <td>Hráč, nebo moderátor, který zprávu napsal</td>
                </tr>
            </tbody>
        </table>

        <!--
CREATE TABLE comments (
    id         INTEGER NOT NULL,
    "comment"  VARCHAR2(1024) NOT NULL,
    tickets_id INTEGER NOT NULL,
    users_id   INTEGER NOT NULL
);

ALTER TABLE comments ADD CONSTRAINT comments_pk PRIMARY KEY ( id );

ALTER TABLE comments
    ADD CONSTRAINT comments_tickets_fk FOREIGN KEY ( tickets_id )
        REFERENCES tickets ( id );

ALTER TABLE comments
    ADD CONSTRAINT comments_users_fk FOREIGN KEY ( users_id )
        REFERENCES users ( id );
        -->
        <p>Tabulka <b>Comments</b></p>
        <table>
            <thead>
                <tr>
                    <th>Název atributu</th>
                    <th>Dat. typ</th>
                    <th>Délka</th>
                    <th>Klíč</th>
                    <th>Null</th>
                    <th>IO</th>
                    <th>Popis</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>comment_id</td>
                    <td>INTEGER</td>
                    <td></td>
                    <td>Primární</td>
                    <td>Ne</td>
                    <td></td>
                    <td>Automatický inkrementovaný PK</td>
                </tr>
                <tr>
                    <td>comment</td>
                    <td>VARCHAR</td>
                    <td>1024</td>
                    <td></td>
                    <td>Ne</td>
                    <td></td>
                    <td>Komentář</td>
                </tr>
                <tr>
                    <td>commented_at</td>
                    <td>DATE</td>
                    <td></td>
                    <td></td>
                    <td>Ne</td>
                    <td></td>
                    <td>Datum, kdy byl komentář napsán</td>
                </tr>
                <tr>
                    <td>Tickets_ticket_id</td>
                    <td>INTEGER</td>
                    <td></td>
                    <td>Cizí (Tickets)</td>
                    <td>Ne</td>
                    <td></td>
                    <td>Ticket, ke kterému je komentář přiřazen</td>
                </tr>
                <tr>
                    <td>Users_user_id</td>
                    <td>INTEGER</td>
                    <td></td>
                    <td>Cizí (Users)</td>
                    <td>Ne</td>
                    <td></td>
                    <td>Moderátor, který komentář napsal</td>
                </tr>
            </tbody>
        </table>

        <!--
CREATE TABLE types (
    id          INTEGER NOT NULL,
    name        VARCHAR2(255) NOT NULL,
    description VARCHAR2(512) NOT NULL
);

ALTER TABLE types ADD CONSTRAINT types_pk PRIMARY KEY ( id );
        -->
        <p>Tabulka <b>Categories</b></p>
        <table>
            <thead>
                <tr>
                    <th>Název atributu</th>
                    <th>Dat. typ</th>
                    <th>Délka</th>
                    <th>Klíč</th>
                    <th>Null</th>
                    <th>IO</th>
                    <th>Popis</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>category_id</td>
                    <td>INTEGER</td>
                    <td></td>
                    <td>Primární</td>
                    <td>Ne</td>
                    <td></td>
                    <td>Automatický inkrementovaný PK</td>
                </tr>
                <tr>
                    <td>name</td>
                    <td>VARCHAR</td>
                    <td>255</td>
                    <td></td>
                    <td>Ne</td>
                    <td></td>
                    <td>Název kategorie ticketu</td>
                </tr>
                <tr>
                    <td>description</td>
                    <td>VARCHAR</td>
                    <td>512</td>
                    <td></td>
                    <td>Ne</td>
                    <td></td>
                    <td>Popis kategorie ticketu</td>
                </tr>
            </tbody>
        </table>

        <!--
            CREATE TABLE ticket_categories (
    tickets_ticket_id      INTEGER NOT NULL,
    updated_at             DATE NOT NULL,
    users_user_id          INTEGER NOT NULL,
    categories_category_id INTEGER NOT NULL
);

ALTER TABLE ticket_categories ADD CONSTRAINT ticket_categories_pk PRIMARY KEY ( tickets_ticket_id,
                                                                                updated_at );

--  ERROR: FK name length exceeds maximum allowed length(30) 
ALTER TABLE ticket_categories
    ADD CONSTRAINT ticket_categories_categories_fk FOREIGN KEY ( categories_category_id )
        REFERENCES categories ( category_id );

ALTER TABLE ticket_categories
    ADD CONSTRAINT ticket_categories_tickets_fk FOREIGN KEY ( tickets_ticket_id )
        REFERENCES tickets ( ticket_id );

ALTER TABLE ticket_categories
    ADD CONSTRAINT ticket_categories_users_fk FOREIGN KEY ( users_user_id )
        REFERENCES users ( user_id );
        -->

        <p>Tabulka <b>Ticket_categories</b></p>
        <table>
            <thead>
                <tr>
                    <th>Název atributu</th>
                    <th>Dat. typ</th>
                    <th>Délka</th>
                    <th>Klíč</th>
                    <th>Null</th>
                    <th>IO</th>
                    <th>Popis</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Tickets_ticket_id</td>
                    <td>INTEGER</td>
                    <td></td>
                    <td>Primární, Cizí (Tickets)</td>
                    <td>Ne</td>
                    <td></td>
                    <td>Ticket, ke kterému je kategorie přiřazena</td>
                </tr>
                <tr>
                    <td>updated_at</td>
                    <td>DATE</td>
                    <td></td>
                    <td>Primární</td>
                    <td>Ne</td>
                    <td></td>
                    <td>Datum, kdy byla kategorie přiřazena k ticketu</td>
                </tr>
                <tr>
                    <td>Users_user_id</td>
                    <td>INTEGER</td>
                    <td></td>
                    <td>Cizí (Users)</td>
                    <td>Ano</td>
                    <td></td>
                    <td>Moderátor, který kategorii přiřadil k ticketu. (Null při vytvoření ticketu, kdy si kategorii vybírá Hráč)</td>
                </tr>
                <tr>
                    <td>Categories_category_id</td>
                    <td>INTEGER</td>
                    <td></td>
                    <td>Cizí (Categories)</td>
                    <td>Ne</td>
                    <td></td>
                    <td>Kategorie, která je přiřazena k ticketu</td>
                </tr>
            </tbody>
        </table>

        <h3>Integritní omezení:</h3>
        <ol>
            <li>Role musí mít hodnotu buď "H" pro hráče, nebo "M" pro moderátora.</li>
        </ol>
    </body>
</html>
